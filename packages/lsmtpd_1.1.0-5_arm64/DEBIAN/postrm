#!/bin/sh
set -e

# Only run cleanup on purge
if [ "$1" = "purge" ]; then
    # Remove env file
    rm -f /etc/default/lsmtpd

    # Remove binary
    rm -f /usr/bin/lsmtpd

    # Remove systemctl service
    rm -f /etc/systemd/system/lsmtpd.service

    # Purge debconf
    echo PURGE | debconf-communicate lsmtpd

    # Reload systemd (in case unit removed)
    if command -v systemctl >/dev/null 2>&1; then
        systemctl daemon-reload >/dev/null 2>&1 || true
    fi
fi

exit 0
